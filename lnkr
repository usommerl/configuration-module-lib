#!/usr/bin/env bash

# Define method install_hook and use library methods lnk
# and su_lnk to create symlinks to configuration files.
# These methods will automatically create backups if a
# file exists at the link location.

function install_hook() {
  echo 'Please define install_hook() function'
  echo 'Example:'
  echo '  lnk $CURRENT_DIRECTORY/file ~/file'
  echo '  su_lnk $CURRENT_DIRECTORY/file /etc/file'
}

# Do not alter bootstrap code unless you know what you are doing.
#################################################################################
function __bootstrap() {
  readonly START_DIRECTORY=$(dirname $(readlink -f "$0"))
  readonly LIB_NAME=lnkr_lib.sh
  local lib_path=$START_DIRECTORY/$LIB_NAME
  local url=https://raw.githubusercontent.com/usommerl/configuration-module-lib/v1/$LIB_NAME
  cd $START_DIRECTORY
  [ ! -e "$lib_path" ] && (curl -O $url || wget $url)
  [ -e "$lib_path" ] && source "$lib_path" "$@"
  echo "Bootstrap failed. Aborting."; exit 1
}
__bootstrap "$@"
